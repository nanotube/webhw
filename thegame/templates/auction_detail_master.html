{% extends "auction_detail.html" %}
{% load filter_extras %}
{% load tag_extras %}

{% block title %}
Auction for Asset {{ auction.asset.name }}
{% endblock title %}

{% block extra_head %}
<script src="/site_media/js/jsi18n.js" type="text/javascript"></script>
<script src="/site_media/js/admin/core.js" type="text/javascript"></script>
<script src="/site_media/js/admin/calendar.js" type="text/javascript"></script>
<script src="/site_media/js/admin/DateTimeShortcuts.js" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="/site_media/css/calendar.css" />
{% endblock extra_head %}

{% block bodytag %}
<body onLoad="divstohide = document.getElementById('master_content').getElementsByTagName('div'); for (var i in divstohide) { if (divstohide[i].className == 'edit_element_form') {divstohide[i].style.display='none'; } } document.bid.bid_amount.focus();">
{% endblock bodytag %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="/">Home</a> &rsaquo; 
    <a href="{{ auction.asset.period.world.get_absolute_url }}">World</a> &rsaquo; 
    <a href="{{ auction.asset.period.get_absolute_url }}">Period</a> &rsaquo; 
    <a href="{{ auction.get_absolute_url }}">Auction</a> &rsaquo; 
    Master View
</div>
{% endblock breadcrumbs %}

{% block change_view %}
    <a href="{{auction.get_absolute_url}}" class="detail">Normal View</a>
{% endblock change_view %}

{% block edit_element_form %}

<div id="master_content">
<div class="expand">
<a href="#" onclick="Effect.toggle('edit_element_form_1', 'blind', {duration: 0.5}); return false;" class="expand">Edit this auction</a>
</div>
<div class="edit_element_form" id="edit_element_form_1">
    <form action='.' method="POST">
    <table class="formtable">
    <caption>Edit auction attributes</caption>
    {{ asset_form.as_table }}
    {{ auction_form.as_table }}
    <tr>
    <td></td>
    <td><input type="submit" value="Submit" /></td>
    </tr>
    </table>
    </form>
    
    <br>
    <a href="#" onclick="Effect.toggle('edit_element_form_1', 'blind', {duration: 0.5}); return false;" class="collapse">Hide form</a>
</div>
</div>

{% endblock edit_element_form %}

{% block bidder_display %}
    <ol>
    {% for winning_bid in auction.winning_bid_set.all %}
        <li>{{ winning_bid.bidder.username }}: {{ winning_bid.bidder.last_name }}, {{ winning_bid.bidder.first_name }}</li>
    {% empty %}
        <li>Nobody</li>
    {% endfor %}
    </ol>
{% endblock bidder_display %}

{% block true_value %}
    <tr>
        <th>Asset True Value:</th>
        <td>{{ auction.asset.true_value|floatformat:2 }}</td>
    </tr>
{% endblock true_value %}
